{% extends 'base.html' %} {% block content %}
<div class="card border-0">
  <div class="card-header">
    <h6 class="card-title">Product Information</h6>
    <div class="d-flex justify-content-end">
      <input
        id="searchInput"
        type="text"
        class="form-control"
        placeholder="Search..."
      />
      <button
        type="button"
        class="btn btn-primary"
        data-bs-toggle="modal"
        data-bs-target="#addProduct"
      >
        <i class="fa fa-plus-circle"></i> Add New Product
      </button>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped table-bordered" id="searchTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Product Name</th>
            <th>Product Unit</th>
            <th>Category</th>
            <th>Price</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="productTableBody">
          {% for row in data %}
          <tr>
            <td>{{ row[0] }}</td>
            <td>{{ row[1] }}</td>
            <td>{{ row[2] }}</td>
            <td>{{ row[3] }}</td>
            <td>{{ row[4] }}</td>
            <td>{{ row[5] }}</td>
            <td>
              <button
                class="btn btn-primary btn-sm edit-btn"
                data-id="{{ row[0] }}"
                data-category-id="{{ row[3] }}"
                data-name="{{ row[1] }}"
                data-unit="{{ row[2] }}"
                data-price="{{ row[4] }}"
                data-description="{{ row[5] }}"
                onclick="openProductEditModal(this)"
              >
                <i class="fas fa-edit"></i>
              </button>
              <form
                id="deleteForm{{ row[0] }}"
                action="{{ url_for('delete_product', product_id=row[0]) }}"
                method="POST"
                style="display: inline"
              >
                <button
                  type="button"
                  class="btn btn-danger btn-sm"
                  onclick="confirmDelete('{{ row[0] }}')"
                >
                  <i class="fas fa-trash-alt"></i>
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div></div>
    <div
      class="modal fade"
      id="addProduct"
      tabindex="-1"
      aria-labelledby="addProductLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addProductLabel">Add New Product</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form
              id="addProductForm"
              method="POST"
              action="{{ url_for('add_product') }}"
            >
              <div class="mb-3">
                <label for="productName" class="form-label">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="productName"
                  name="product_name"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="product_unit" class="form-label"
                  >Product Unit</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="product_unit"
                  name="product_unit"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="category_name" class="form-label"
                  >category name
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="category_name"
                  name="category_name"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="productPrice" class="form-label">Price</label>
                <input
                  type="number"
                  step="0.01"
                  class="form-control"
                  id="productPrice"
                  name="price"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="productDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="productDescription"
                  name="description"
                  required
                ></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Add Product</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script src="{{ url_for('static', filename='js/addmodels.js') }}"></script>
  </div>
  {% endblock %}
</div>
